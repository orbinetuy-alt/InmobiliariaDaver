<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title id="pageTitle">Propiedad | Daver Inmobiliaria</title>
  <meta name="description" id="pageDescription" content="Detalle de propiedad">
  <link rel="stylesheet" href="css/styles.css?v=105">
  <link rel="icon" href="assets/logo.png" type="image/png">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1 class="brand">
        <img src="assets/logo.png" alt="Daver Inmobiliaria" class="header-logo">
      </h1>
      <nav class="main-nav" id="mainNav">
        <a href="index.html">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12l9-9 9 9h-2v7a2 2 0 01-2 2H7a2 2 0 01-2-2v-7H3z"/>
          </svg>
          Inicio
        </a>
        <a href="listings.html">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
            <path d="M9 22V12h6v10"/>
          </svg>
          Propiedades
        </a>
        <a href="nosotros.html">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
          Nosotros
        </a>
        <a href="ubicacion.html">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
            <circle cx="12" cy="10" r="3"/>
          </svg>
          Ubicación
        </a>
        <a href="contacto.html">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
            <path d="M22 6l-10 7L2 6"/>
          </svg>
          Contacto
        </a>
      </nav>
      <button class="nav-toggle" id="navToggle" aria-controls="mainNav" aria-expanded="false" aria-label="Abrir menú">
        <svg width="26" height="26" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path class="line line1" d="M3 6h18" stroke="#222" stroke-width="2" stroke-linecap="round" />
          <path class="line line2" d="M3 12h18" stroke="#222" stroke-width="2" stroke-linecap="round" />
          <path class="line line3" d="M3 18h18" stroke="#222" stroke-width="2" stroke-linecap="round" />
        </svg>
      </button>
    </div>
  </header>

  <!-- Loading state -->
  <div id="loadingState" style="text-align: center; padding: 100px 20px;">
    <div style="border: 4px solid #f3f3f3; border-top: 4px solid #667eea; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
    <p style="color: #666;">Cargando propiedad...</p>
  </div>

  <!-- Error state -->
  <div id="errorState" style="display: none; text-align: center; padding: 100px 20px;">
    <svg width="80" height="80" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #e74c3c; margin: 0 auto 20px;">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
    </svg>
    <h2 style="color: #333; margin: 0 0 10px 0;">Propiedad no encontrada</h2>
    <p style="color: #666; margin: 0 0 20px 0;">Lo sentimos, no pudimos encontrar esta propiedad.</p>
    <a href="listings.html" class="btn" style="display: inline-block;">Ver todas las propiedades</a>
  </div>

  <!-- Property content (hidden until loaded) -->
  <main id="propertyContent" class="container property-detail" style="display: none;">
    <!-- Property header with background -->
    <div class="property-header" id="propertyHeader">
      <div class="property-title">
        <span class="property-type" id="propertyType"></span>
        <h2 id="propertyTitle"></h2>
        <address>
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
            <circle cx="12" cy="9" r="2.5"/>
          </svg>
          <span id="propertyAddress"></span>
        </address>
      </div>
      <div class="property-price">
        <span class="price-label" id="operationLabel">Venta</span>
        <span class="price" id="propertyPrice"></span><span class="price-detail" id="commonExpenses" style="display: none;"></span>
      </div>
    </div>

    <div class="property-content">
      <div class="property-main">
        <!-- Gallery -->
        <div class="property-gallery">
          <img id="mainPropertyImage" src="" alt="" class="main-image" onerror="this.src='assets/placeholder.svg'">
        </div>

        <!-- Features -->
        <div class="property-features">
          <h3>Características</h3>
          <div class="features-grid" id="featuresGrid"></div>
        </div>

        <!-- Description -->
        <div class="property-description">
          <h3>Descripción</h3>
          <div id="propertyDescription"></div>
        </div>

        <!-- Map -->
        <div class="property-location" id="mapSection" style="display: none;">
          <h3>Ubicación</h3>
          <div class="location-map" id="mapContainer"></div>
          <p class="location-note">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
              <circle cx="12" cy="9" r="2.5"/>
            </svg>
            La ubicación en el mapa es aproximada.
          </p>
        </div>
      </div>

      <!-- Contact sidebar -->
      <aside class="property-sidebar">
        <div class="contact-card">
          <h3>Consultá por esta propiedad</h3>
          <form class="contact-form" id="propertyContactForm" action="https://api.web3forms.com/submit" method="POST">
            <input type="hidden" name="access_key" value="87fe239b-af68-4e95-ae3d-af3a45b933c3">
            <input type="hidden" name="subject" id="formSubject" value="Consulta por Propiedad - Daver">
            <input type="hidden" name="from_name" value="Formulario Propiedad - Daver">
            <input type="hidden" name="redirect" value="https://web3forms.com/success">
            
            <input type="text" id="name" name="name" placeholder="Nombre" required>
            <input type="email" id="email" name="email" placeholder="Email" required>
            <input type="tel" id="phone" name="phone" placeholder="Teléfono">
            <textarea id="message" name="message" rows="4" placeholder="Mensaje" required></textarea>
            <button type="submit" class="btn">Enviar consulta</button>
            <div id="formMsg"></div>
          </form>
        </div>
      </aside>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>&copy; <span id="year"></span> Daver Inmobiliaria — Todos los derechos reservados.</p>
    </div>
  </footer>

  <script src="js/script.js?v=105"></script>
  <script type="module" src="js/property-detail.js?v=105"></script>
</body>
</html>
